<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>flow: flow</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">flow
   &#160;<span id="projectnumber">3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">flow </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><a class="el" href="index.html#introduction">Introduction</a> </li>
<li><a class="el" href="index.html#considerations">Technical considerations</a> </li>
<li><a class="el" href="index.html#principles">Design principles</a> </li>
<li><a class="el" href="index.html#samples">Samples concrete nodes</a> </li>
<li><a class="el" href="index.html#examples">Examples</a> </li>
<li><a class="el" href="index.html#thanks">Thanks</a> </li>
<li><a class="el" href="index.html#license">License</a></li>
</ul>
<h1><a class="anchor" id="introduction"></a>
Introduction</h1>
<p>flow is a headers-only <a href="http://en.wikipedia.org/wiki/C%2B%2B0x">C++11</a> framework which provides the building blocks for streaming data packets through a graph of data-transforming nodes. Note that this library has nothing to do with computer networking. In the context of this framework, a data packet is a slice of a data stream. A <a class="el" href="classflow_1_1graph.html">flow::graph</a> will typically be composed of <a class="el" href="classflow_1_1producer.html">producer nodes</a>, <a class="el" href="classflow_1_1transformer.html">transformer nodes</a> and <a class="el" href="classflow_1_1consumer.html">consumer nodes</a>. A data packets is produced by a single producer node, can later go through any number of transformer nodes and is finally consumed by a single consumer node. Nodes are connected to one another by <a class="el" href="classflow_1_1pipe.html">pipes</a> attached to their <a class="el" href="classflow_1_1inpin.html">input pins</a> and <a class="el" href="classflow_1_1outpin.html">output pins</a>. The graph and base node classes already provide the necessary API to build a graph by connecting nodes together and to run the graph. As a library user, you are only expected to write concrete node classes that perform the tasks you require.</p>
<p>Here's an example of a simple graph. The two producers nodes could be capturing data from some hardware or be generating a steady stream of data on their own. The transformer node processes the data coming in from both producers. The transformer's output data finally goes to a consumer node.</p>
<div class="image">
<img src="introduction_graph_simple.png" alt="introduction_graph_simple.png"/>
<div class="caption">
Data flow for a simple graph</div></div>
<p> If we need to monitor the data coming in from <code>producer 2</code>, we can <a class="el" href="classflow_1_1samples_1_1generic_1_1tee.html">tee</a> it to another consumer node. This new consumer node could save all the data it receives to a file or log it in real-time without preserving it. The <a class="el" href="classflow_1_1samples_1_1generic_1_1tee.html">tee</a> transformer node is an example of a concrete node that duplicates incoming data to all its outputs. It is provided in the framework and can be found in the <a class="el" href="namespaceflow_1_1samples_1_1generic.html">flow::samples::generic</a> namespace.</p>
<div class="image">
<img src="introduction_graph_tee.png" alt="introduction_graph_tee.png"/>
<div class="caption">
Data flow for a graph with a tee transformer node</div></div>
 <h1><a class="anchor" id="considerations"></a>
Technical considerations</h1>
<p>This implementation:</p>
<ul>
<li>uses templates heavily.</li>
<li>depends on many of C++11's language features and library headers.</li>
<li>has been tested with Visual Studio 2012, GCC 4.6.3 and Xcode 4.5.2.</li>
<li>uses <a href="http://www.cmake.org">CMake</a> as the build and packaging tool. As a user of flow, you do not need to build anything it consists only in header files.</li>
<li>uses <a href="http://www.stack.nl/~dimitri/doxygen/index.html">Doxygen</a> to generate its documentation (and, optionally, <a href="http://www.graphviz.org/">Graphviz's dot</a>).</li>
</ul>
<h1><a class="anchor" id="principles"></a>
Design principles</h1>
<h2><a class="anchor" id="use_unique_ptr"></a>
Use of std::unique_ptr</h2>
<p>When flowing through the graph, <a class="el" href="classflow_1_1packet.html">data packets</a> are wrapped in std::unique_ptr. This helps memory managment tremendously and enforces the idea that, at any point in time, only a single entity -pipe or node- is responsible for a data packet.</p>
<h2><a class="anchor" id="thread_per_node"></a>
A thread per node</h2>
<p>flow is multi-threaded in that the <a class="el" href="classflow_1_1graph.html">graph</a> assigns a thread of execution to each of its nodes. The lifetime of these threads is taken care by <a class="el" href="classflow_1_1graph.html">graph</a>. As a library user, the only mutli-threaded code you would write is whatever a node would require to perform its work.</p>
<h2><a class="anchor" id="node_state"></a>
Node state</h2>
<p>A node can be in one of three states: <a class="el" href="namespaceflow_1_1state.html#aabd868437631afbd909a1c310873f75fa8417a33338539623f8a9d6805db9d81a">paused</a>, <a class="el" href="namespaceflow_1_1state.html#aabd868437631afbd909a1c310873f75fa9a25b7a987c9774ffbe298cda6c7ceed">started</a> or <a class="el" href="namespaceflow_1_1state.html#aabd868437631afbd909a1c310873f75fad7ec84100813523c1e27f6bd234efe8a">stopped</a>. When instantiated, a node is in the <a class="el" href="namespaceflow_1_1state.html#aabd868437631afbd909a1c310873f75fa8417a33338539623f8a9d6805db9d81a">paused</a> state. When a node is in the <a class="el" href="namespaceflow_1_1state.html#aabd868437631afbd909a1c310873f75fa9a25b7a987c9774ffbe298cda6c7ceed">started</a> state, a thread of execution is created for it and it is actively consuming and/or producing packets. When a node is in the <a class="el" href="namespaceflow_1_1state.html#aabd868437631afbd909a1c310873f75fa8417a33338539623f8a9d6805db9d81a">paused</a>, it is no longer consuming and/or producing packets. If a concrete node class has internal state, that state should be frozen such that, when the node is re-started, packet processing will continue as if the node had not been paused. When a node is in the <a class="el" href="namespaceflow_1_1state.html#aabd868437631afbd909a1c310873f75fad7ec84100813523c1e27f6bd234efe8a">stopped</a> state, it's thread of execution is joined. If a concrete node class has internal state, that state should be reset.</p>
<p>Before a node can transition to a new state, it must be added to a graph. Transitioning between these states is done by calling a corresponding member function of the <a class="el" href="classflow_1_1graph.html">graph</a> class. For this relase, all nodes in a graph are always in the same state. Regardless of the nodes' state, nodes can be added to and removed from a graph at any time and can be connected to and disconnected from another node at any time.</p>
<h2><a class="anchor" id="consumption_time"></a>
Packet consumption time</h2>
<p>Consumption time is the time at which a data packet can be set to be consumed by a consumer node. When a data packet with an assigned consumption time arrives at a consumer node and the consumption time is:</p>
<ul>
<li>in the future: the consumer node waits or sleeps until the current time and the consumption time match, then consumes the packet.</li>
<li>in the past: the packet is unused and discarded.</li>
</ul>
<p>Node that consumption time is optional. Data packets with no consumption time are consumed as soon as they reach a consumer node.</p>
<h2><a class="anchor" id="named_things"></a>
Named building blocks</h2>
<p>All classes in flow, including the <a class="el" href="classflow_1_1node.html">node</a> base class, derive from <a class="el" href="classflow_1_1named.html">named</a>. That makes all concrete node classes required to be given a name too. This feature serves two purposes:</p>
<ul>
<li>nodes can be refered to by their names when building a graph, improving code readability greatly.</li>
<li>helps debugging, especially since all pins and pipes are also named and have names automatically generated based on what they are connected to.</li>
</ul>
<h1><a class="anchor" id="samples"></a>
Samples concrete nodes</h1>
<p>As convenience, a small collection of concrete nodes is provided. They are found in the <a class="el" href="namespaceflow_1_1samples_1_1generic.html">flow::samples::generic</a> and <a class="el" href="namespaceflow_1_1samples_1_1math.html">flow::samples::math</a> namespaces.</p>
<h1><a class="anchor" id="examples"></a>
Examples</h1>
<ul>
<li><a class="el" href="hello_world.html">Hello, world!</a></li>
<li><a class="el" href="multiplier.html">Multiplication expression</a></li>
</ul>
<h1><a class="anchor" id="thanks"></a>
Thanks</h1>
<ul>
<li>Volodymyr Frolov, author of the <a href="http://www.codeproject.com/KB/threads/lwsync.aspx">lwsync</a> library used in this project until version 3.0.</li>
<li>Dušan Rodina, maker of <a href="http://www.softwareideas.net/en/Default.aspx">Software Ideas Modeler</a>. Modeler was used to create the graph diagrams in the <a class="el" href="index.html#introduction">Introduction</a>.</li>
</ul>
<h1><a class="anchor" id="license"></a>
License</h1>
<pre class="fragment">Boost Software License - Version 1.0 - August 17th, 2003

Permission is hereby granted, free of charge, to any person or organization
obtaining a copy of the software and accompanying documentation covered by
this license (the "Software") to use, reproduce, display, distribute,
execute, and transmit the Software, and to prepare derivative works of the
Software, and to permit third-parties to whom the Software is furnished to
do so, all subject to the following:

The copyright notices in the Software and this entire statement, including
the above license grant, this restriction and the following disclaimer,
must be included in all copies of the Software, in whole or in part, and
all derivative works of the Software, unless such copies or derivative
works are solely in the form of machine-executable object code generated by
a source language processor.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT
SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE
FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,
ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.
</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 12 2013 15:16:26 for flow by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
